#!/usr/bin/env zsh

# 
# Script to install WP site locally
# 

cd ~/lab/

DIR="$1"

if [ -d $DIR ] 
then
    echo "A site named '$1' already exists!!! Try again with a different name" 
else
    mkdir $DIR
    cd $DIR

    wp core download
    wp core config --dbname=$1 --dbuser=root --dbhost=127.0.0.1
    wp db create
    wp core install --skip-email --title="$1" --admin_user="chandeep" --admin_password="chandeep" --admin_email=chandeepsj@gmail.com --url=http://$1.lab/
    wp plugin delete hello
    wp theme delete twentysixteen twentyseventeen
    wp plugin install wordpress-importer --activate
fi